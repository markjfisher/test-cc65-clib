# ROM Simple Test Makefile
# Tests basic ROM functions without printf dependencies

CC_TARGET = bbc-clib
ROM_PATH = ../../roms

# Build target executable  
test: test.c $(ROM_PATH)/clib.rom
	@echo "Building simple ROM test with $(CC_TARGET) target..."
	cl65 -t $(CC_TARGET) -Ln test.lbl --start-addr 0x1900 -o test test.c

# Build test disk
disk: test
	@echo "Creating test disk..."
	cp test $.TEST-ROM
	dfstool make --output test-rom.ssd test-rom.json

# Clean build artifacts
clean:
	rm -f test test.lbl $.TEST-ROM test-rom.ssd

.PHONY: clean disk
